<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>FIFA World Cup 2026 ‚Äì Round of 32</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
  margin:0;
  font-family:"Segoe UI", Arial, sans-serif;
  background:#0b0b0b;
  color:#fff;
}
header{
  text-align:center;
  padding:20px;
  font-size:28px;
  font-weight:700;
  background:#111;
}
.bracket-container{
  display:flex;
  flex-direction:column;
  align-items:center;
  padding:20px;
}
.round{
  display:flex;
  flex-direction:column;
  align-items:center;
  margin:20px 0;
}
.match{
  display:flex;
  flex-direction:column;
  gap:6px;
  margin:10px 0;
  background:rgba(255,255,255,0.1);
  padding:8px 12px;
  border-radius:10px;
}
.team{
  padding:8px 12px;
  border-radius:6px;
  background:rgba(0,0,0,0.3);
  cursor:pointer;
  transition:0.2s;
}
.team:hover{
  background:rgba(0,0,0,0.5);
}
.team.winner{
  background:#00ff99;
  color:#000;
  font-weight:700;
}
.round-title{ font-size:22px; margin-bottom:10px; text-align:center; font-weight:600; }
.center{
  text-align:center;
  margin:40px 0;
}
.trophy{
  font-size:90px;
}
@media(max-width:900px){
  .bracket-container{padding:10px;}
}
</style>
</head>
<body>
<header>FIFA World Cup 2026 ‚Äì Bracket</header>
<div class="bracket-container" id="bracket"></div>
<div class="center">
  <div class="trophy" id="trophy" style="display:none;">üèÜ</div>
  <div id="winnerName" style="font-size:24px; margin-top:10px;"></div>
</div>

<script>
// Get R32 teams from group.html selections
let r32Teams = JSON.parse(localStorage.getItem("wc2026_group_picks") || "[]"); 
// For demo, if empty, fill with placeholder teams
if(r32Teams.length!==32){
  r32Teams = [
    "Mexico","Japan","Canada","Switzerland","Brazil","Senegal","USA","Australia",
    "Germany","Ecuador","Netherlands","South Korea","Belgium","New Zealand","Spain","Uruguay",
    "France","Norway","Argentina","Jordan","Portugal","Colombia","England","Panama",
    "Italy","Cameroon","Denmark","Iran","Costa Rica","Serbia","Morocco","Croatia"
  ];
}

// Define bracket structure
let rounds = [
  {name:"Round of 32", matches: []},
  {name:"Round of 16", matches: []},
  {name:"Quarterfinals", matches: []},
  {name:"Semifinals", matches: []},
  {name:"Final", matches: []}
];

// Build R32 matches
for(let i=0;i<32;i+=2){
  rounds[0].matches.push([r32Teams[i],r32Teams[i+1]]);
}

// Empty matches for next rounds
rounds[1].matches = Array(8).fill(["",""]);
rounds[2].matches = Array(4).fill(["",""]);
rounds[3].matches = Array(2).fill(["",""]);
rounds[4].matches = [["",""]];

// Render bracket
const bracketDiv = document.getElementById("bracket");

function renderBracket(){
  bracketDiv.innerHTML="";
  rounds.forEach((round,rIndex)=>{
    const roundDiv = document.createElement("div");
    roundDiv.className="round";
    const title = document.createElement("div");
    title.className="round-title";
    title.textContent = round.name;
    roundDiv.appendChild(title);

    round.matches.forEach((match,mIndex)=>{
      const matchDiv = document.createElement("div");
      matchDiv.className="match";
      match.forEach((teamName,tIndex)=>{
        if(teamName==="") return;
        const teamDiv = document.createElement("div");
        teamDiv.className="team";
        teamDiv.textContent = teamName;
        teamDiv.onclick = ()=>{
          selectWinner(rIndex,mIndex,tIndex,teamDiv);
        }
        matchDiv.appendChild(teamDiv);
      });
      roundDiv.appendChild(matchDiv);
    });
    bracketDiv.appendChild(roundDiv);
  });
}

function selectWinner(roundIndex,matchIndex,teamIndex,teamDiv){
  const matchDiv = teamDiv.parentElement;
  matchDiv.querySelectorAll(".team").forEach(t=>t.classList.remove("winner"));
  teamDiv.classList.add("winner");

  // advance winner
  if(roundIndex<rounds.length-1){
    const nextRound = rounds[roundIndex+1];
    const nextMatchIndex = Math.floor(matchIndex/2);
    const slot = matchIndex%2;
    nextRound.matches[nextMatchIndex][slot] = rounds[roundIndex].matches[matchIndex][teamIndex];
    renderBracket();
  }

  // Check final winner
  const finalMatch = rounds[4].matches[0];
  if(finalMatch[0]!=="" && finalMatch[1]!=="" && document.querySelectorAll(".round:nth-child(5) .winner").length>0){
    document.getElementById("trophy").style.display="block";
    document.getElementById("winnerName").textContent=finalMatch[0]; 
  }
}

renderBracket();
</script>
</body>
</html>
